<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Productivity Journal</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: #f9fafb; line-height: 1.6; }
        
        .container { max-width: 1024px; margin: 0 auto; padding: 1.5rem; background: white; min-height: 100vh; }
        
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; flex-wrap: wrap; gap: 1rem; }
        .date-nav { display: flex; align-items: center; gap: 1rem; }
        .nav-btn { padding: 0.5rem 1rem; border: none; border-radius: 0.5rem; cursor: pointer; font-size: 0.875rem; font-weight: 500; display: flex; align-items: center; gap: 0.5rem; }
        .nav-btn:hover { opacity: 0.8; }
        .date-btn { padding: 0.5rem; border: none; border-radius: 50%; cursor: pointer; background: #f3f4f6; font-size: 1.2rem; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; }
        .date-btn:hover { background: #e5e7eb; }
        .trends-btn { background: #dbeafe; color: #2563eb; }
        
        .grid { display: grid; grid-template-columns: 1fr; gap: 1.5rem; margin-bottom: 1.5rem; }
        @media (min-width: 1024px) { .grid { grid-template-columns: 1fr 1fr; } }
        
        .section { padding: 1.5rem; border-radius: 0.75rem; border: 1px solid #e5e7eb; }
        .morning { background: linear-gradient(135deg, #fefce8 0%, #fef3c7 100%); border-color: #f59e0b; }
        .evening { background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%); border-color: #8b5cf6; }
        .tomorrow { background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%); border-color: #10b981; }
        .notes { background: linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%); border-color: #6b7280; }
        
        .section h2 { font-size: 1.25rem; font-weight: 600; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem; }
        .section h2 .emoji { font-size: 1.5rem; }
        
        .field { margin-bottom: 1rem; }
        .label { display: block; font-weight: 500; color: #374151; margin-bottom: 0.5rem; font-size: 0.875rem; }
        .input { width: 100%; padding: 0.75rem; border: 2px solid #d1d5db; border-radius: 0.5rem; font-size: 0.875rem; margin-bottom: 0.5rem; transition: all 0.2s; }
        .input:focus { outline: none; border-color: #3b82f6; box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1); }
        .textarea { width: 100%; padding: 0.75rem; border: 2px solid #d1d5db; border-radius: 0.5rem; resize: vertical; font-family: inherit; font-size: 0.875rem; }
        .textarea:focus { outline: none; border-color: #3b82f6; box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1); }
        
        .energy-buttons { display: grid; grid-template-columns: repeat(5, 1fr); gap: 0.5rem; margin-top: 0.5rem; }
        .energy-btn { padding: 0.75rem; border: 2px solid #d1d5db; border-radius: 0.5rem; font-weight: 600; cursor: pointer; transition: all 0.2s; font-size: 1rem; }
        .energy-btn:hover { transform: translateY(-1px); }
        .energy-1 { background: #fee2e2; color: #dc2626; border-color: #dc2626; }
        .energy-2 { background: #fef3c7; color: #d97706; border-color: #d97706; }
        .energy-3 { background: #fed7aa; color: #ea580c; border-color: #ea580c; }
        .energy-4 { background: #fef08a; color: #ca8a04; border-color: #ca8a04; }
        .energy-5 { background: #dcfce7; color: #16a34a; border-color: #16a34a; }
        .energy-unselected { background: #f9fafb; color: #6b7280; border-color: #d1d5db; }
        
        .energy-level { text-align: center; color: #7c3aed; font-weight: 500; margin-top: 0.75rem; font-size: 0.875rem; }
        
        .trends-view { max-width: 800px; margin: 0 auto; }
        .back-btn { background: #dbeafe; color: #2563eb; border: none; padding: 0.5rem 1rem; border-radius: 0.5rem; cursor: pointer; margin-bottom: 1.5rem; }
        .back-btn:hover { background: #bfdbfe; }
        
        .entry-card { border: 1px solid #e5e7eb; border-radius: 0.5rem; padding: 1.5rem; margin-bottom: 1rem; background: white; }
        .entry-header { display: flex; justify-content: between; align-items: center; margin-bottom: 1rem; }
        .entry-date { font-weight: 600; color: #374151; }
        .energy-badge { background: #dbeafe; color: #2563eb; padding: 0.25rem 0.75rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 500; }
        .entry-section { margin-bottom: 1rem; }
        .entry-section:last-child { margin-bottom: 0; }
        .entry-title { font-size: 0.875rem; font-weight: 500; color: #6b7280; margin-bottom: 0.5rem; }
        .entry-list { list-style: none; }
        .entry-list li { position: relative; padding-left: 1rem; margin-bottom: 0.25rem; color: #374151; font-size: 0.875rem; }
        .entry-list li:before { content: '•'; position: absolute; left: 0; color: #6b7280; }
        
        @media (max-width: 640px) {
            .container { padding: 1rem; }
            .header { flex-direction: column; align-items: stretch; }
            .date-nav { justify-content: center; }
            .energy-buttons { grid-template-columns: repeat(5, 1fr); }
            .energy-btn { padding: 0.5rem; font-size: 0.875rem; }
        }
    </style>
</head>
<body>
    <div id="app" class="container">
        <div class="header">
            <div class="date-nav">
                <button class="date-btn" onclick="navigateDate(-1)">‹</button>
                <h1 id="currentDateDisplay" style="font-size: 1.5rem; font-weight: bold; min-width: 300px; text-align: center;"></h1>
                <button class="date-btn" onclick="navigateDate(1)">›</button>
            </div>
            <div style="display: flex; gap: 0.5rem;">
                <button class="nav-btn trends-btn" onclick="showTrends()">📈 Trends</button>
            </div>
        </div>

        <div id="mainView">
            <div class="grid">
                <div class="section morning">
                    <h2><span class="emoji">🌅</span> Morning Focus</h2>
                    <div class="field">
                        <label class="label">Today's Top 3 Priorities</label>
                        <input type="text" class="input" placeholder="Priority 1" id="priority1" oninput="autoSave()">
                        <input type="text" class="input" placeholder="Priority 2" id="priority2" oninput="autoSave()">
                        <input type="text" class="input" placeholder="Priority 3" id="priority3" oninput="autoSave()">
                    </div>
                    <div class="field">
                        <label class="label">I am grateful for...</label>
                        <input type="text" class="input" placeholder="Grateful for 1" id="grateful1" oninput="autoSave()">
                        <input type="text" class="input" placeholder="Grateful for 2" id="grateful2" oninput="autoSave()">
                        <input type="text" class="input" placeholder="Grateful for 3" id="grateful3" oninput="autoSave()">
                    </div>
                    <div class="field">
                        <label class="label">Daily Affirmation</label>
                        <input type="text" class="input" placeholder="What would make today great?" id="affirmation" oninput="autoSave()">
                    </div>
                </div>

                <div class="section evening">
                    <h2><span class="emoji">🌙</span> Evening Reflection</h2>
                    <div class="field">
                        <label class="label">3 Amazing things that happened today</label>
                        <input type="text" class="input" placeholder="Win 1" id="win1" oninput="autoSave()">
                        <input type="text" class="input" placeholder="Win 2" id="win2" oninput="autoSave()">
                        <input type="text" class="input" placeholder="Win 3" id="win3" oninput="autoSave()">
                    </div>
                    <div class="field">
                        <label class="label">How could I have made today better?</label>
                        <input type="text" class="input" placeholder="Improvement 1" id="improvement1" oninput="autoSave()">
                        <input type="text" class="input" placeholder="Improvement 2" id="improvement2" oninput="autoSave()">
                    </div>
                    <div class="field">
                        <label class="label">Energy Level (1=Very Low, 5=Very High)</label>
                        <div class="energy-buttons">
                            <button class="energy-btn" onclick="setEnergy(1)" id="energy1">1</button>
                            <button class="energy-btn" onclick="setEnergy(2)" id="energy2">2</button>
                            <button class="energy-btn" onclick="setEnergy(3)" id="energy3">3</button>
                            <button class="energy-btn" onclick="setEnergy(4)" id="energy4">4</button>
                            <button class="energy-btn" onclick="setEnergy(5)" id="energy5">5</button>
                        </div>
                        <div class="energy-level" id="energyLabel">Moderate Energy</div>
                    </div>
                </div>
            </div>

            <div class="section tomorrow">
                <h2><span class="emoji">🚀</span> Tomorrow's Focus</h2>
                <div class="field">
                    <label class="label">Top 3 priorities for tomorrow</label>
                    <input type="text" class="input" placeholder="Tomorrow's priority 1" id="tomorrow1" oninput="autoSave()">
                    <input type="text" class="input" placeholder="Tomorrow's priority 2" id="tomorrow2" oninput="autoSave()">
                    <input type="text" class="input" placeholder="Tomorrow's priority 3" id="tomorrow3" oninput="autoSave()">
                </div>
            </div>

            <div class="section notes">
                <h2><span class="emoji">✏️</span> Additional Notes</h2>
                <div class="field">
                    <textarea class="textarea" rows="4" placeholder="Any additional thoughts, insights, or observations from today..." id="notes" oninput="autoSave()"></textarea>
                </div>
            </div>
        </div>

        <div id="trendsView" style="display: none;" class="trends-view">
            <button class="back-btn" onclick="showMain()">← Back to Journal</button>
            <h1 style="font-size: 2rem; font-weight: bold; margin-bottom: 2rem;">Productivity Trends</h1>
            <div id="trendsContent"></div>
        </div>
    </div>

    <script>
        let currentDate = new Date();
        let entries = {};
        let currentEntry = {
            morningPriorities: ['', '', ''],
            gratefulFor: ['', '', ''],
            affirmation: '',
            eveningWins: ['', '', ''],
            improvements: ['', ''],
            tomorrowFocus: ['', '', ''],
            energyLevel: 3,
            notes: ''
        };
        let autoSaveTimeout;

        // Load data from localStorage
        function loadData() {
            try {
                const saved = localStorage.getItem('productivity-journal-entries');
                if (saved) {
                    entries = JSON.parse(saved);
                }
            } catch (error) {
                console.error('Error loading data:', error);
            }
        }

        // Save data to localStorage
        function saveData() {
            try {
                localStorage.setItem('productivity-journal-entries', JSON.stringify(entries));
            } catch (error) {
                console.error('Error saving data:', error);
            }
        }

        // Format date for storage key
        function formatDate(date) {
            return date.toISOString().split('T')[0];
        }

        // Format date for display
        function formatDisplayDate(date) {
            return date.toLocaleDateString('en-US', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
        }

        // Update the current entry object from form fields
        function updateCurrentEntry() {
            currentEntry = {
                morningPriorities: [
                    document.getElementById('priority1').value,
                    document.getElementById('priority2').value,
                    document.getElementById('priority3').value
                ],
                gratefulFor: [
                    document.getElementById('grateful1').value,
                    document.getElementById('grateful2').value,
                    document.getElementById('grateful3').value
                ],
                affirmation: document.getElementById('affirmation').value,
                eveningWins: [
                    document.getElementById('win1').value,
                    document.getElementById('win2').value,
                    document.getElementById('win3').value
                ],
                improvements: [
                    document.getElementById('improvement1').value,
                    document.getElementById('improvement2').value
                ],
                tomorrowFocus: [
                    document.getElementById('tomorrow1').value,
                    document.getElementById('tomorrow2').value,
                    document.getElementById('tomorrow3').value
                ],
                energyLevel: currentEntry.energyLevel,
                notes: document.getElementById('notes').value
            };
        }

        // Load entry for current date
        function loadCurrentEntry() {
            const dateKey = formatDate(currentDate);
            
            if (entries[dateKey]) {
                currentEntry = entries[dateKey];
            } else {
                // Check if yesterday has tomorrow's focus for today
                const yesterday = new Date(currentDate);
                yesterday.setDate(yesterday.getDate() - 1);
                const yesterdayKey = formatDate(yesterday);
                const yesterdayEntry = entries[yesterdayKey];
                
                currentEntry = {
                    morningPriorities: ['', '', ''],
                    gratefulFor: ['', '', ''],
                    affirmation: '',
                    eveningWins: ['', '', ''],
                    improvements: ['', ''],
                    tomorrowFocus: ['', '', ''],
                    energyLevel: 3,
                    notes: ''
                };

                // If yesterday has tomorrow's focus, use those as today's priorities
                if (yesterdayEntry && yesterdayEntry.tomorrowFocus.some(focus => focus.trim())) {
                    currentEntry.morningPriorities = [
                        yesterdayEntry.tomorrowFocus[0] || '',
                        yesterdayEntry.tomorrowFocus[1] || '',
                        yesterdayEntry.tomorrowFocus[2] || ''
                    ];
                }
            }

            // Update form fields
            document.getElementById('priority1').value = currentEntry.morningPriorities[0] || '';
            document.getElementById('priority2').value = currentEntry.morningPriorities[1] || '';
            document.getElementById('priority3').value = currentEntry.morningPriorities[2] || '';
            document.getElementById('grateful1').value = currentEntry.gratefulFor[0] || '';
            document.getElementById('grateful2').value = currentEntry.gratefulFor[1] || '';
            document.getElementById('grateful3').value = currentEntry.gratefulFor[2] || '';
            document.getElementById('affirmation').value = currentEntry.affirmation || '';
            document.getElementById('win1').value = currentEntry.eveningWins[0] || '';
            document.getElementById('win2').value = currentEntry.eveningWins[1] || '';
            document.getElementById('win3').value = currentEntry.eveningWins[2] || '';
            document.getElementById('improvement1').value = currentEntry.improvements[0] || '';
            document.getElementById('improvement2').value = currentEntry.improvements[1] || '';
            document.getElementById('tomorrow1').value = currentEntry.tomorrowFocus[0] || '';
            document.getElementById('tomorrow2').value = currentEntry.tomorrowFocus[1] || '';
            document.getElementById('tomorrow3').value = currentEntry.tomorrowFocus[2] || '';
            document.getElementById('notes').value = currentEntry.notes || '';
            
            setEnergy(currentEntry.energyLevel || 3);
        }

        // Auto-save functionality
        function autoSave() {
            clearTimeout(autoSaveTimeout);
            autoSaveTimeout = setTimeout(() => {
                updateCurrentEntry();
                
                // Check if there's any content
                const hasContent = currentEntry.morningPriorities.some(p => p.trim()) ||
                                 currentEntry.gratefulFor.some(g => g.trim()) ||
                                 currentEntry.affirmation.trim() ||
                                 currentEntry.eveningWins.some(w => w.trim()) ||
                                 currentEntry.improvements.some(i => i.trim()) ||
                                 currentEntry.tomorrowFocus.some(t => t.trim()) ||
                                 currentEntry.notes.trim();
                
                if (hasContent) {
                    const dateKey = formatDate(currentDate);
                    entries[dateKey] = { ...currentEntry, lastUpdated: new Date().toISOString() };
                    saveData();
                }
            }, 1000);
        }

        // Navigate to different date
        function navigateDate(direction) {
            updateCurrentEntry();
            const dateKey = formatDate(currentDate);
            
            // Save current entry if it has content
            const hasContent = currentEntry.morningPriorities.some(p => p.trim()) ||
                             currentEntry.gratefulFor.some(g => g.trim()) ||
                             currentEntry.affirmation.trim() ||
                             currentEntry.eveningWins.some(w => w.trim()) ||
                             currentEntry.improvements.some(i => i.trim()) ||
                             currentEntry.tomorrowFocus.some(t => t.trim()) ||
                             currentEntry.notes.trim();
            
            if (hasContent) {
                entries[dateKey] = { ...currentEntry, lastUpdated: new Date().toISOString() };
                saveData();
            }

            currentDate.setDate(currentDate.getDate() + direction);
            updateDisplay();
            loadCurrentEntry();
        }

        // Set energy level
        function setEnergy(level) {
            currentEntry.energyLevel = level;
            
            // Update button styles
            for (let i = 1; i <= 5; i++) {
                const btn = document.getElementById(`energy${i}`);
                btn.className = `energy-btn ${i === level ? `energy-${i}` : 'energy-unselected'}`;
            }
            
            // Update label
            const labels = {
                1: 'Very Low Energy',
                2: 'Low Energy', 
                3: 'Moderate Energy',
                4: 'High Energy',
                5: 'Very High Energy'
            };
            document.getElementById('energyLabel').textContent = labels[level];
            
            autoSave();
        }

        // Show trends view
        function showTrends() {
            document.getElementById('mainView').style.display = 'none';
            document.getElementById('trendsView').style.display = 'block';
            
            // Generate trends content
            const recentEntries = Object.entries(entries)
                .sort(([a], [b]) => new Date(b) - new Date(a))
                .slice(0, 10);
            
            let html = '';
            
            if (recentEntries.length === 0) {
                html = '<p style="text-align: center; color: #6b7280; font-size: 1.125rem; margin-top: 3rem;">No entries yet. Start journaling to see your trends!</p>';
            } else {
                recentEntries.forEach(([date, entry]) => {
                    const displayDate = new Date(date).toLocaleDateString('en-US', { 
                        weekday: 'short', 
                        month: 'short', 
                        day: 'numeric' 
                    });
                    
                    html += `
                        <div class="entry-card">
                            <div class="entry-header">
                                <div class="entry-date">${displayDate}</div>
                                <div class="energy-badge">Energy: ${entry.energyLevel}/5</div>
                            </div>`;
                    
                    const priorities = entry.morningPriorities.filter(p => p.trim());
                    if (priorities.length > 0) {
                        html += `
                            <div class="entry-section">
                                <div class="entry-title">Top Priorities:</div>
                                <ul class="entry-list">
                                    ${priorities.map(p => `<li>${p}</li>`).join('')}
                                </ul>
                            </div>`;
                    }
                    
                    const wins = entry.eveningWins.filter(w => w.trim());
                    if (wins.length > 0) {
                        html += `
                            <div class="entry-section">
                                <div class="entry-title">Key Wins:</div>
                                <ul class="entry-list">
                                    ${wins.map(w => `<li>${w}</li>`).join('')}
                                </ul>
                            </div>`;
                    }
                    
                    html += '</div>';
                });
            }
            
            document.getElementById('trendsContent').innerHTML = html;
        }

        // Show main view
        function showMain() {
            document.getElementById('trendsView').style.display = 'none';
            document.getElementById('mainView').style.display = 'block';
        }

        // Update display
        function updateDisplay() {
            document.getElementById('currentDateDisplay').textContent = formatDisplayDate(currentDate);
        }

        // Initialize app
        function init() {
            loadData();
            updateDisplay();
            loadCurrentEntry();
        }

        // Start the app when page loads
        window.addEventListener('load', init);
    </script>
</body>
</html>
